<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chess</title>
  <script src="chessboard.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>
    function endGame(king) {
      let wholeBoard = document.getElementById("board");
      let winner = "TIE";
      console.log(king[0]);
      
      if (king[0] === 'B') {
        winner = "WHITE";
      }
      else {
        winner = "BLACK";
      }
      wholeBoard.innerHTML = "";
      wholeBoard.innerHTML = `GAME OVER - ${winner} WINS!!!`;
    }

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
      ev.preventDefault();
      var data = ev.dataTransfer.getData("text");
      console.log(data);
      console.log(ev.srcElement.parentElement);
      // let target = ev.srcElement.parentElement;
      let thePiece = document.getElementById(data);
      let target = ev.srcElement;
      if (target.parentElement.querySelector('.box')) {
        console.log('dropped on square');
        target.appendChild(thePiece);
      }
      else {
        console.log('dropped on image');
        console.log(target.id);
        if (target.id === "Bking5" || target.id === "Wking11" || target.id === "Wking12" || target.id === "Wking13" || target.id === "Wking14" || target.id === "Wking15" || target.id === "Wking16" || target.id === "Wking17") {
          endGame(target.id);
          // target.parentElement.appendChild(thePiece);
          // target.remove();
          
        }
        target.parentElement.appendChild(thePiece);
        target.remove();
      }


    }
  </script>

<body>
  <h1> Chess</h1>
  <ul id="board">

  </ul>
</body>

</html>